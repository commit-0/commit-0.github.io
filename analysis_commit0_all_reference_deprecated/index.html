
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>Analysis commit0 all reference deprecated - Commit-0</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference-gold-deprecated" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Commit-0" class="md-header__button md-logo" aria-label="Commit-0" data-md-component="logo">
      
  <img src="../logo2.webp" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Commit-0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Analysis commit0 all reference deprecated
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Commit-0" class="md-nav__button md-logo" aria-label="Commit-0" data-md-component="logo">
      
  <img src="../logo2.webp" alt="logo">

    </a>
    Commit-0
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../setupdist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commit0
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Leaderboard
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytest-summary-for-test-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Pytest Summary for test tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failed-pytests" class="md-nav__link">
    <span class="md-ellipsis">
      Failed pytests:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#patch-diff" class="md-nav__link">
    <span class="md-ellipsis">
      Patch diff
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><a href="/analysis_commit0_all_reference">back to Reference (Gold) summary</a></p>
<h1 id="reference-gold-deprecated"><strong>Reference (Gold)</strong>: deprecated</h1>
<h2 id="pytest-summary-for-test-tests">Pytest Summary for test <code>tests</code></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">status</th>
<th style="text-align: center;">count</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">passed</td>
<td style="text-align: center;">171</td>
</tr>
<tr>
<td style="text-align: left;">total</td>
<td style="text-align: center;">171</td>
</tr>
<tr>
<td style="text-align: left;">collected</td>
<td style="text-align: center;">171</td>
</tr>
</tbody>
</table>
<h2 id="failed-pytests">Failed pytests:</h2>
<h2 id="patch-diff">Patch diff</h2>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/deprecated/classic.py b/deprecated/classic.py</span>
<span class="gh">index fc9af25..6ca3f27 100644</span>
<span class="gd">--- a/deprecated/classic.py</span>
<span class="gi">+++ b/deprecated/classic.py</span>
<span class="gu">@@ -1,3 +1,4 @@</span>
<span class="gi">+# -*- coding: utf-8 -*-</span>
<span class="w"> </span>&quot;&quot;&quot;
<span class="w"> </span>Classic deprecation warning
<span class="w"> </span>===========================
<span class="gu">@@ -10,18 +11,25 @@ import functools</span>
<span class="w"> </span>import inspect
<span class="w"> </span>import platform
<span class="w"> </span>import warnings
<span class="gi">+</span>
<span class="w"> </span>import wrapt
<span class="gi">+</span>
<span class="w"> </span>try:
<span class="gi">+    # If the C extension for wrapt was compiled and wrapt/_wrappers.pyd exists, then the</span>
<span class="gi">+    # stack level that should be passed to warnings.warn should be 2. However, if using</span>
<span class="gi">+    # a pure python wrapt, a extra stacklevel is required.</span>
<span class="w"> </span>    import wrapt._wrappers
<span class="gi">+</span>
<span class="w"> </span>    _routine_stacklevel = 2
<span class="w"> </span>    _class_stacklevel = 2
<span class="w"> </span>except ImportError:
<span class="w"> </span>    _routine_stacklevel = 3
<span class="gd">-    if platform.python_implementation() == &#39;PyPy&#39;:</span>
<span class="gi">+    if platform.python_implementation() == &quot;PyPy&quot;:</span>
<span class="w"> </span>        _class_stacklevel = 2
<span class="w"> </span>    else:
<span class="w"> </span>        _class_stacklevel = 3
<span class="gd">-string_types = type(b&#39;&#39;), type(u&#39;&#39;)</span>
<span class="gi">+</span>
<span class="gi">+string_types = (type(b&#39;&#39;), type(u&#39;&#39;))</span>


<span class="w"> </span>class ClassicAdapter(wrapt.AdapterFactory):
<span class="gu">@@ -75,8 +83,7 @@ class ClassicAdapter(wrapt.AdapterFactory):</span>
<span class="w"> </span>           return x + y
<span class="w"> </span>    &quot;&quot;&quot;

<span class="gd">-    def __init__(self, reason=&#39;&#39;, version=&#39;&#39;, action=None, category=</span>
<span class="gd">-        DeprecationWarning):</span>
<span class="gi">+    def __init__(self, reason=&quot;&quot;, version=&quot;&quot;, action=None, category=DeprecationWarning):</span>
<span class="w"> </span>        &quot;&quot;&quot;
<span class="w"> </span>        Construct a wrapper adapter.

<span class="gu">@@ -103,8 +110,8 @@ class ClassicAdapter(wrapt.AdapterFactory):</span>
<span class="w"> </span>            By default, the category class is :class:`~DeprecationWarning`,
<span class="w"> </span>            you can inherit this class to define your own deprecation warning category.
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gd">-        self.reason = reason or &#39;&#39;</span>
<span class="gd">-        self.version = version or &#39;&#39;</span>
<span class="gi">+        self.reason = reason or &quot;&quot;</span>
<span class="gi">+        self.version = version or &quot;&quot;</span>
<span class="w"> </span>        self.action = action
<span class="w"> </span>        self.category = category
<span class="w"> </span>        super(ClassicAdapter, self).__init__()
<span class="gu">@@ -119,7 +126,21 @@ class ClassicAdapter(wrapt.AdapterFactory):</span>

<span class="w"> </span>        :return: The warning message.
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gd">-        pass</span>
<span class="gi">+        if instance is None:</span>
<span class="gi">+            if inspect.isclass(wrapped):</span>
<span class="gi">+                fmt = &quot;Call to deprecated class {name}.&quot;</span>
<span class="gi">+            else:</span>
<span class="gi">+                fmt = &quot;Call to deprecated function (or staticmethod) {name}.&quot;</span>
<span class="gi">+        else:</span>
<span class="gi">+            if inspect.isclass(instance):</span>
<span class="gi">+                fmt = &quot;Call to deprecated class method {name}.&quot;</span>
<span class="gi">+            else:</span>
<span class="gi">+                fmt = &quot;Call to deprecated method {name}.&quot;</span>
<span class="gi">+        if self.reason:</span>
<span class="gi">+            fmt += &quot; ({reason})&quot;</span>
<span class="gi">+        if self.version:</span>
<span class="gi">+            fmt += &quot; -- Deprecated since version {version}.&quot;</span>
<span class="gi">+        return fmt.format(name=wrapped.__name__, reason=self.reason or &quot;&quot;, version=self.version or &quot;&quot;)</span>

<span class="w"> </span>    def __call__(self, wrapped):
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gu">@@ -143,15 +164,16 @@ class ClassicAdapter(wrapt.AdapterFactory):</span>
<span class="w"> </span>                if self.action:
<span class="w"> </span>                    with warnings.catch_warnings():
<span class="w"> </span>                        warnings.simplefilter(self.action, self.category)
<span class="gd">-                        warnings.warn(msg, category=self.category,</span>
<span class="gd">-                            stacklevel=_class_stacklevel)</span>
<span class="gi">+                        warnings.warn(msg, category=self.category, stacklevel=_class_stacklevel)</span>
<span class="w"> </span>                else:
<span class="gd">-                    warnings.warn(msg, category=self.category, stacklevel=</span>
<span class="gd">-                        _class_stacklevel)</span>
<span class="gi">+                    warnings.warn(msg, category=self.category, stacklevel=_class_stacklevel)</span>
<span class="w"> </span>                if old_new1 is object.__new__:
<span class="w"> </span>                    return old_new1(cls)
<span class="gi">+                # actually, we don&#39;t know the real signature of *old_new1*</span>
<span class="w"> </span>                return old_new1(cls, *args, **kwargs)
<span class="gi">+</span>
<span class="w"> </span>            wrapped.__new__ = staticmethod(wrapped_cls)
<span class="gi">+</span>
<span class="w"> </span>        return wrapped


<span class="gu">@@ -231,4 +253,40 @@ def deprecated(*args, **kwargs):</span>
<span class="w"> </span>           return x + y

<span class="w"> </span>    &quot;&quot;&quot;
<span class="gd">-    pass</span>
<span class="gi">+    if args and isinstance(args[0], string_types):</span>
<span class="gi">+        kwargs[&#39;reason&#39;] = args[0]</span>
<span class="gi">+        args = args[1:]</span>
<span class="gi">+</span>
<span class="gi">+    if args and not callable(args[0]):</span>
<span class="gi">+        raise TypeError(repr(type(args[0])))</span>
<span class="gi">+</span>
<span class="gi">+    if args:</span>
<span class="gi">+        action = kwargs.get(&#39;action&#39;)</span>
<span class="gi">+        category = kwargs.get(&#39;category&#39;, DeprecationWarning)</span>
<span class="gi">+        adapter_cls = kwargs.pop(&#39;adapter_cls&#39;, ClassicAdapter)</span>
<span class="gi">+        adapter = adapter_cls(**kwargs)</span>
<span class="gi">+</span>
<span class="gi">+        wrapped = args[0]</span>
<span class="gi">+        if inspect.isclass(wrapped):</span>
<span class="gi">+            wrapped = adapter(wrapped)</span>
<span class="gi">+            return wrapped</span>
<span class="gi">+</span>
<span class="gi">+        elif inspect.isroutine(wrapped):</span>
<span class="gi">+</span>
<span class="gi">+            @wrapt.decorator(adapter=adapter)</span>
<span class="gi">+            def wrapper_function(wrapped_, instance_, args_, kwargs_):</span>
<span class="gi">+                msg = adapter.get_deprecated_msg(wrapped_, instance_)</span>
<span class="gi">+                if action:</span>
<span class="gi">+                    with warnings.catch_warnings():</span>
<span class="gi">+                        warnings.simplefilter(action, category)</span>
<span class="gi">+                        warnings.warn(msg, category=category, stacklevel=_routine_stacklevel)</span>
<span class="gi">+                else:</span>
<span class="gi">+                    warnings.warn(msg, category=category, stacklevel=_routine_stacklevel)</span>
<span class="gi">+                return wrapped_(*args_, **kwargs_)</span>
<span class="gi">+</span>
<span class="gi">+            return wrapper_function(wrapped)</span>
<span class="gi">+</span>
<span class="gi">+        else:</span>
<span class="gi">+            raise TypeError(repr(type(wrapped)))</span>
<span class="gi">+</span>
<span class="gi">+    return functools.partial(deprecated, **kwargs)</span>
<span class="gh">diff --git a/deprecated/sphinx.py b/deprecated/sphinx.py</span>
<span class="gh">index 6daf81f..7e717fb 100644</span>
<span class="gd">--- a/deprecated/sphinx.py</span>
<span class="gi">+++ b/deprecated/sphinx.py</span>
<span class="gu">@@ -1,3 +1,4 @@</span>
<span class="gi">+# coding: utf-8</span>
<span class="w"> </span>&quot;&quot;&quot;
<span class="w"> </span>Sphinx directive integration
<span class="w"> </span>============================
<span class="gu">@@ -20,7 +21,9 @@ when the function/method is called or the class is constructed.</span>
<span class="w"> </span>&quot;&quot;&quot;
<span class="w"> </span>import re
<span class="w"> </span>import textwrap
<span class="gi">+</span>
<span class="w"> </span>import wrapt
<span class="gi">+</span>
<span class="w"> </span>from deprecated.classic import ClassicAdapter
<span class="w"> </span>from deprecated.classic import deprecated as _classic_deprecated

<span class="gu">@@ -38,8 +41,15 @@ class SphinxAdapter(ClassicAdapter):</span>
<span class="w"> </span>    - The reason message is obviously added in the directive block if not empty.
<span class="w"> </span>    &quot;&quot;&quot;

<span class="gd">-    def __init__(self, directive, reason=&#39;&#39;, version=&#39;&#39;, action=None,</span>
<span class="gd">-        category=DeprecationWarning, line_length=70):</span>
<span class="gi">+    def __init__(</span>
<span class="gi">+        self,</span>
<span class="gi">+        directive,</span>
<span class="gi">+        reason=&quot;&quot;,</span>
<span class="gi">+        version=&quot;&quot;,</span>
<span class="gi">+        action=None,</span>
<span class="gi">+        category=DeprecationWarning,</span>
<span class="gi">+        line_length=70,</span>
<span class="gi">+    ):</span>
<span class="w"> </span>        &quot;&quot;&quot;
<span class="w"> </span>        Construct a wrapper adapter.

<span class="gu">@@ -75,12 +85,11 @@ class SphinxAdapter(ClassicAdapter):</span>
<span class="w"> </span>            Max line length of the directive text. If non nul, a long text is wrapped in several lines.
<span class="w"> </span>        &quot;&quot;&quot;
<span class="w"> </span>        if not version:
<span class="gd">-            raise ValueError(</span>
<span class="gd">-                &quot;&#39;version&#39; argument is required in Sphinx directives&quot;)</span>
<span class="gi">+            # https://github.com/tantale/deprecated/issues/40</span>
<span class="gi">+            raise ValueError(&quot;&#39;version&#39; argument is required in Sphinx directives&quot;)</span>
<span class="w"> </span>        self.directive = directive
<span class="w"> </span>        self.line_length = line_length
<span class="gd">-        super(SphinxAdapter, self).__init__(reason=reason, version=version,</span>
<span class="gd">-            action=action, category=category)</span>
<span class="gi">+        super(SphinxAdapter, self).__init__(reason=reason, version=version, action=action, category=category)</span>

<span class="w"> </span>    def __call__(self, wrapped):
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gu">@@ -90,32 +99,42 @@ class SphinxAdapter(ClassicAdapter):</span>

<span class="w"> </span>        :return: the decorated class or function.
<span class="w"> </span>        &quot;&quot;&quot;
<span class="gd">-        fmt = (&#39;.. {directive}:: {version}&#39; if self.version else</span>
<span class="gd">-            &#39;.. {directive}::&#39;)</span>
<span class="gd">-        div_lines = [fmt.format(directive=self.directive, version=self.version)</span>
<span class="gd">-            ]</span>
<span class="gi">+        # -- build the directive division</span>
<span class="gi">+        fmt = &quot;.. {directive}:: {version}&quot; if self.version else &quot;.. {directive}::&quot;</span>
<span class="gi">+        div_lines = [fmt.format(directive=self.directive, version=self.version)]</span>
<span class="w"> </span>        width = self.line_length - 3 if self.line_length &gt; 3 else 2 ** 16
<span class="w"> </span>        reason = textwrap.dedent(self.reason).strip()
<span class="w"> </span>        for paragraph in reason.splitlines():
<span class="w"> </span>            if paragraph:
<span class="gd">-                div_lines.extend(textwrap.fill(paragraph, width=width,</span>
<span class="gd">-                    initial_indent=&#39;   &#39;, subsequent_indent=&#39;   &#39;).splitlines()</span>
<span class="gd">-                    )</span>
<span class="gi">+                div_lines.extend(</span>
<span class="gi">+                    textwrap.fill(</span>
<span class="gi">+                        paragraph,</span>
<span class="gi">+                        width=width,</span>
<span class="gi">+                        initial_indent=&quot;   &quot;,</span>
<span class="gi">+                        subsequent_indent=&quot;   &quot;,</span>
<span class="gi">+                    ).splitlines()</span>
<span class="gi">+                )</span>
<span class="w"> </span>            else:
<span class="gd">-                div_lines.append(&#39;&#39;)</span>
<span class="gd">-        docstring = wrapped.__doc__ or &#39;&#39;</span>
<span class="gd">-        lines = docstring.splitlines(keepends=True) or [&#39;&#39;]</span>
<span class="gd">-        docstring = textwrap.dedent(&#39;&#39;.join(lines[1:])) if len(lines</span>
<span class="gd">-            ) &gt; 1 else &#39;&#39;</span>
<span class="gi">+                div_lines.append(&quot;&quot;)</span>
<span class="gi">+</span>
<span class="gi">+        # -- get the docstring, normalize the trailing newlines</span>
<span class="gi">+        # keep a consistent behaviour if the docstring starts with newline or directly on the first one</span>
<span class="gi">+        docstring = wrapped.__doc__ or &quot;&quot;</span>
<span class="gi">+        lines = docstring.splitlines(keepends=True) or [&quot;&quot;]</span>
<span class="gi">+        docstring = textwrap.dedent(&quot;&quot;.join(lines[1:])) if len(lines) &gt; 1 else &quot;&quot;</span>
<span class="w"> </span>        docstring = lines[0] + docstring
<span class="w"> </span>        if docstring:
<span class="gd">-            docstring = re.sub(&#39;\\n+$&#39;, &#39;&#39;, docstring, flags=re.DOTALL</span>
<span class="gd">-                ) + &#39;\n\n&#39;</span>
<span class="gi">+            # An empty line must separate the original docstring and the directive.</span>
<span class="gi">+            docstring = re.sub(r&quot;\n+$&quot;, &quot;&quot;, docstring, flags=re.DOTALL) + &quot;\n\n&quot;</span>
<span class="w"> </span>        else:
<span class="gd">-            docstring = &#39;\n&#39;</span>
<span class="gd">-        docstring += &#39;&#39;.join(&#39;{}\n&#39;.format(line) for line in div_lines)</span>
<span class="gi">+            # Avoid &quot;Explicit markup ends without a blank line&quot; when the decorated function has no docstring</span>
<span class="gi">+            docstring = &quot;\n&quot;</span>
<span class="gi">+</span>
<span class="gi">+        # -- append the directive division to the docstring</span>
<span class="gi">+        docstring += &quot;&quot;.join(&quot;{}\n&quot;.format(line) for line in div_lines)</span>
<span class="gi">+</span>
<span class="w"> </span>        wrapped.__doc__ = docstring
<span class="gd">-        if self.directive in {&#39;versionadded&#39;, &#39;versionchanged&#39;}:</span>
<span class="gi">+        if self.directive in {&quot;versionadded&quot;, &quot;versionchanged&quot;}:</span>
<span class="w"> </span>            return wrapped
<span class="w"> </span>        return super(SphinxAdapter, self).__call__(wrapped)

<span class="gu">@@ -133,10 +152,15 @@ class SphinxAdapter(ClassicAdapter):</span>
<span class="w"> </span>           Strip Sphinx cross-referencing syntax from warning message.

<span class="w"> </span>        &quot;&quot;&quot;
<span class="gd">-        pass</span>
<span class="gi">+        msg = super(SphinxAdapter, self).get_deprecated_msg(wrapped, instance)</span>
<span class="gi">+        # Strip Sphinx cross reference syntax (like &quot;:function:&quot;, &quot;:py:func:&quot; and &quot;:py:meth:&quot;)</span>
<span class="gi">+        # Possible values are &quot;:role:`foo`&quot;, &quot;:domain:role:`foo`&quot;</span>
<span class="gi">+        # where ``role`` and ``domain`` should match &quot;[a-zA-Z]+&quot;</span>
<span class="gi">+        msg = re.sub(r&quot;(?: : [a-zA-Z]+ )? : [a-zA-Z]+ : (`[^`]*`)&quot;, r&quot;\1&quot;, msg, flags=re.X)</span>
<span class="gi">+        return msg</span>


<span class="gd">-def versionadded(reason=&#39;&#39;, version=&#39;&#39;, line_length=70):</span>
<span class="gi">+def versionadded(reason=&quot;&quot;, version=&quot;&quot;, line_length=70):</span>
<span class="w"> </span>    &quot;&quot;&quot;
<span class="w"> </span>    This decorator can be used to insert a &quot;versionadded&quot; directive
<span class="w"> </span>    in your function/class docstring in order to documents the
<span class="gu">@@ -157,10 +181,16 @@ def versionadded(reason=&#39;&#39;, version=&#39;&#39;, line_length=70):</span>

<span class="w"> </span>    :return: the decorated function.
<span class="w"> </span>    &quot;&quot;&quot;
<span class="gd">-    pass</span>
<span class="gi">+    adapter = SphinxAdapter(</span>
<span class="gi">+        &#39;versionadded&#39;,</span>
<span class="gi">+        reason=reason,</span>
<span class="gi">+        version=version,</span>
<span class="gi">+        line_length=line_length,</span>
<span class="gi">+    )</span>
<span class="gi">+    return adapter</span>


<span class="gd">-def versionchanged(reason=&#39;&#39;, version=&#39;&#39;, line_length=70):</span>
<span class="gi">+def versionchanged(reason=&quot;&quot;, version=&quot;&quot;, line_length=70):</span>
<span class="w"> </span>    &quot;&quot;&quot;
<span class="w"> </span>    This decorator can be used to insert a &quot;versionchanged&quot; directive
<span class="w"> </span>    in your function/class docstring in order to documents the
<span class="gu">@@ -180,10 +210,16 @@ def versionchanged(reason=&#39;&#39;, version=&#39;&#39;, line_length=70):</span>

<span class="w"> </span>    :return: the decorated function.
<span class="w"> </span>    &quot;&quot;&quot;
<span class="gd">-    pass</span>
<span class="gi">+    adapter = SphinxAdapter(</span>
<span class="gi">+        &#39;versionchanged&#39;,</span>
<span class="gi">+        reason=reason,</span>
<span class="gi">+        version=version,</span>
<span class="gi">+        line_length=line_length,</span>
<span class="gi">+    )</span>
<span class="gi">+    return adapter</span>


<span class="gd">-def deprecated(reason=&#39;&#39;, version=&#39;&#39;, line_length=70, **kwargs):</span>
<span class="gi">+def deprecated(reason=&quot;&quot;, version=&quot;&quot;, line_length=70, **kwargs):</span>
<span class="w"> </span>    &quot;&quot;&quot;
<span class="w"> </span>    This decorator can be used to insert a &quot;deprecated&quot; directive
<span class="w"> </span>    in your function/class docstring in order to documents the
<span class="gu">@@ -218,4 +254,9 @@ def deprecated(reason=&#39;&#39;, version=&#39;&#39;, line_length=70, **kwargs):</span>
<span class="w"> </span>    .. versionchanged:: 1.2.13
<span class="w"> </span>       Change the signature of the decorator to reflect the valid use cases.
<span class="w"> </span>    &quot;&quot;&quot;
<span class="gd">-    pass</span>
<span class="gi">+    directive = kwargs.pop(&#39;directive&#39;, &#39;deprecated&#39;)</span>
<span class="gi">+    adapter_cls = kwargs.pop(&#39;adapter_cls&#39;, SphinxAdapter)</span>
<span class="gi">+    kwargs[&quot;reason&quot;] = reason</span>
<span class="gi">+    kwargs[&quot;version&quot;] = version</span>
<span class="gi">+    kwargs[&quot;line_length&quot;] = line_length</span>
<span class="gi">+    return _classic_deprecated(directive=directive, adapter_cls=adapter_cls, **kwargs)</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
        <script src="../javascripts/tablesort.number.js"></script>
      
    
  </body>
</html>