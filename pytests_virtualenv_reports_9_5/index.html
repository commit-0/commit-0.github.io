
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Select repository - spec2repo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#select-repository" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="spec2repo" class="md-header__button md-logo" aria-label="spec2repo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            spec2repo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Select repository
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="spec2repo" class="md-nav__button md-logo" aria-label="spec2repo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    spec2repo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../repos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../leaderboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Leaderboard
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pytests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submission Pytests
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submission Analysis
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytest-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Pytest Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failed-pytest-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Failed Pytest Tests
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="select-repository">Select repository</h1>
<p><a class="md-button" href="/pytests_sphinx_reports_9_5">sphinx_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_parsel_reports_9_5">parsel_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_tinydb_reports_9_5">tinydb_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_more-itertools_reports_9_5">more-itertools_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_marshmallow_reports_9_5">marshmallow_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_sqlparse_reports_9_5">sqlparse_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_cachetools_reports_9_5">cachetools_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_mimesis_reports_9_5">mimesis_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_moviepy_reports_9_5">moviepy_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_scrapy_reports_9_5">scrapy_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_filesystem_spec_reports_9_5">filesystem_spec_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_python-progressbar_reports_9_5">python-progressbar_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_pytest_reports_9_5">pytest_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_web3.py_reports_9_5">web3.py_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_xarray_reports_9_5">xarray_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_deprecated_reports_9_5">deprecated_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_graphene_reports_9_5">graphene_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_flask_reports_9_5">flask_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_wcwidth_reports_9_5">wcwidth_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_dulwich_reports_9_5">dulwich_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_chardet_reports_9_5">chardet_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_seaborn_reports_9_5">seaborn_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_loguru_reports_9_5">loguru_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_statsmodels_reports_9_5">statsmodels_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_jinja_reports_9_5">jinja_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_virtualenv_reports_9_5">virtualenv_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_pylint_reports_9_5">pylint_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_python-rsa_reports_9_5">python-rsa_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_cookiecutter_reports_9_5">cookiecutter_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_tornado_reports_9_5">tornado_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_fastapi_reports_9_5">fastapi_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_dnspython_reports_9_5">dnspython_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_fabric_reports_9_5">fabric_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_geopandas_reports_9_5">geopandas_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_bitstring_reports_9_5">bitstring_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_requests_reports_9_5">requests_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_imapclient_reports_9_5">imapclient_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_minitorch_reports_9_5">minitorch_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_pydantic_reports_9_5">pydantic_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_jedi_reports_9_5">jedi_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_simpy_reports_9_5">simpy_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_tlslite-ng_reports_9_5">tlslite-ng_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_attrs_reports_9_5">attrs_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_click_reports_9_5">click_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_paramiko_reports_9_5">paramiko_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_voluptuous_reports_9_5">voluptuous_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_networkx_reports_9_5">networkx_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_PyBoy_reports_9_5">PyBoy_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_joblib_reports_9_5">joblib_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_pexpect_reports_9_5">pexpect_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_babel_reports_9_5">babel_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_portalocker_reports_9_5">portalocker_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_pypdf_reports_9_5">pypdf_reports_9_5</a></p>
<p><a class="md-button" href="/pytests_python-prompt-toolkit_reports_9_5">python-prompt-toolkit_reports_9_5</a></p>
<h2 id="pytest-summary">Pytest Summary</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">category</th>
<th style="text-align: center;">count</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">passed</td>
<td style="text-align: center;">284</td>
</tr>
<tr>
<td style="text-align: left;">skipped</td>
<td style="text-align: center;">31</td>
</tr>
<tr>
<td style="text-align: left;">failed</td>
<td style="text-align: center;">17</td>
</tr>
<tr>
<td style="text-align: left;">total</td>
<td style="text-align: center;">332</td>
</tr>
<tr>
<td style="text-align: left;">collected</td>
<td style="text-align: center;">332</td>
</tr>
<tr>
<td style="text-align: left;">duration</td>
<td style="text-align: center;">72.38s</td>
</tr>
</tbody>
</table>
<h2 id="failed-pytest-tests">Failed Pytest Tests</h2>
<details><summary> <pre>tests/unit/create/via_global_ref/test_build_c_ext.py::test_can_build_c_extensions[venv]</pre></summary><pre>
creator = 'venv'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_ve0')
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc3664b4c0>

    @pytest.mark.xfail(
        condition=bool(os.environ.get("CI_RUN")),
        strict=False,
        reason="did not manage to setup CI to run with VC 14.1 C++ compiler, but passes locally",
    )
    @pytest.mark.skipif(
        not Path(CURRENT.system_include).exists() and not builtin_shows_marker_missing(),
        reason="Building C-Extensions requires header files with host python",
    )
    @pytest.mark.parametrize("creator", [i for i in CREATOR_CLASSES if i != "builtin"])
    def test_can_build_c_extensions(creator, tmp_path, coverage_env):
        env, greet = tmp_path / "env", str(tmp_path / "greet")
        shutil.copytree(str(Path(__file__).parent.resolve() / "greet"), greet)
        session = cli_run(["--creator", creator, "--seeder", "app-data", str(env), "-vvv"])
        coverage_env()
        cmd = [
            str(session.creator.script("pip")),
            "install",
            "--no-index",
            "--no-deps",
            "--disable-pip-version-check",
            "-vvv",
            greet,
        ]
        process = Popen(cmd)
        process.communicate()
>       assert process.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = <Popen: returncode: 1 args: ['/tmp/pytest-of-root/pytest-0/test_can_build_c_...>.returncode

cmd        = ['/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_ve0/env/bin/pip', 'install', '--no-index', '--no-deps', '--disable-pip-version-check', '-vvv', ...]
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc3664b4c0>
creator    = 'venv'
env        = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_ve0/env')
greet      = '/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_ve0/greet'
process    = <Popen: returncode: 1 args: ['/tmp/pytest-of-root/pytest-0/test_can_build_c_...>
session    = <virtualenv.run.session.Session object at 0x7ecc364c4830>
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_ve0')

tests/unit/create/via_global_ref/test_build_c_ext.py:55: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/via_global_ref/test_build_c_ext.py::test_can_build_c_extensions[cpython3-posix]</pre></summary><pre>
creator = 'cpython3-posix'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_cp0')
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc3664bb00>

    @pytest.mark.xfail(
        condition=bool(os.environ.get("CI_RUN")),
        strict=False,
        reason="did not manage to setup CI to run with VC 14.1 C++ compiler, but passes locally",
    )
    @pytest.mark.skipif(
        not Path(CURRENT.system_include).exists() and not builtin_shows_marker_missing(),
        reason="Building C-Extensions requires header files with host python",
    )
    @pytest.mark.parametrize("creator", [i for i in CREATOR_CLASSES if i != "builtin"])
    def test_can_build_c_extensions(creator, tmp_path, coverage_env):
        env, greet = tmp_path / "env", str(tmp_path / "greet")
        shutil.copytree(str(Path(__file__).parent.resolve() / "greet"), greet)
        session = cli_run(["--creator", creator, "--seeder", "app-data", str(env), "-vvv"])
        coverage_env()
        cmd = [
            str(session.creator.script("pip")),
            "install",
            "--no-index",
            "--no-deps",
            "--disable-pip-version-check",
            "-vvv",
            greet,
        ]
        process = Popen(cmd)
        process.communicate()
>       assert process.returncode == 0
E       AssertionError: assert 1 == 0
E        +  where 1 = <Popen: returncode: 1 args: ['/tmp/pytest-of-root/pytest-0/test_can_build_c_...>.returncode

cmd        = ['/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_cp0/env/bin/pip', 'install', '--no-index', '--no-deps', '--disable-pip-version-check', '-vvv', ...]
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc3664bb00>
creator    = 'cpython3-posix'
env        = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_cp0/env')
greet      = '/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_cp0/greet'
process    = <Popen: returncode: 1 args: ['/tmp/pytest-of-root/pytest-0/test_can_build_c_...>
session    = <virtualenv.run.session.Session object at 0x7ecc364c6ff0>
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_can_build_c_extensions_cp0')

tests/unit/create/via_global_ref/test_build_c_ext.py:55: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_python_activator.py::test_python[no_prompt]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366bc360>

    def test_python(raise_on_non_source_class, activation_tester):
        class Python(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    PythonActivator,
                    session,
                    sys.executable,
                    activate_script="activate_this.py",
                    extension="py",
                    non_source_fail_message="You must use import runpy; runpy.run_path(this_file)",
                )
                self.unix_line_ending = not IS_WIN

            def env(self, tmp_path):
                env = os.environ.copy()
                env["PYTHONIOENCODING"] = "utf-8"
                for key in ("VIRTUAL_ENV", "PYTHONPATH"):
                    env.pop(str(key), None)
                env["PATH"] = os.pathsep.join([str(tmp_path), str(tmp_path / "other")])
                return env

            @staticmethod
            def _get_test_lines(activate_script):
                raw = f"""
                import os
                import sys
                import platform
                import runpy

                def print_r(value):
                    print(repr(value))

                print_r(os.environ.get("VIRTUAL_ENV"))
                print_r(os.environ.get("VIRTUAL_ENV_PROMPT"))
                print_r(os.environ.get("PATH").split(os.pathsep))
                print_r(sys.path)

                file_at = {str(activate_script)!r}
                # CPython 2 requires non-ascii path open to be unicode
                runpy.run_path(file_at)
                print_r(os.environ.get("VIRTUAL_ENV"))
                print_r(os.environ.get("VIRTUAL_ENV_PROMPT"))
                print_r(os.environ.get("PATH").split(os.pathsep))
                print_r(sys.path)

                import pydoc_test
                print_r(pydoc_test.__file__)
                """
                return dedent(raw).splitlines()

            def assert_output(self, out, raw, tmp_path):  # noqa: ARG002
                out = [literal_eval(i) for i in out]
                assert out[0] is None  # start with VIRTUAL_ENV None
                assert out[1] is None  # likewise for VIRTUAL_ENV_PROMPT

                prev_path = out[2]
                prev_sys_path = out[3]
                assert out[4] == str(self._creator.dest)  # VIRTUAL_ENV now points to the virtual env folder

                assert out[5] == str(self._creator.env_name)  # VIRTUAL_ENV_PROMPT now has the env name

                new_path = out[6]  # PATH now starts with bin path of current
                assert ([str(self._creator.bin_dir), *prev_path]) == new_path

                # sys path contains the site package at its start
                new_sys_path = out[7]

                new_lib_paths = {str(i) for i in self._creator.libs}
                assert prev_sys_path == new_sys_path[len(new_lib_paths) :]
                assert new_lib_paths == set(new_sys_path[: len(new_lib_paths)])

                # manage to import from activate site package
                dest = self.norm_path(self._creator.purelib / "pydoc_test.py")
                found = self.norm_path(out[8])
                assert found.startswith(dest)

            def non_source_activate(self, activate_script):
                act = str(activate_script)
                return [*self._invoke_script, "-c", f"exec(open({act!r}).read())"]

>       activation_tester(Python)

Python     = <class 'test_python_activator.test_python.<locals>.Python'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366bc360>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_python_activator.py:92: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc364c54f0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc3649d490>
        tester     = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_python_activator.test_python.<locals>.Python'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0')
        version    = 'Python 3.12.5\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc3649d490>
        self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/activate_this.py')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0/script.py']
        line       = b'sys.prefix = base'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc3649d490>
        out        = ['None', "'testbed'", "['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_pyt...ages', '/testbed/src']", "'/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j'", "'e-$ èрт🚒♞中片-j'", ...]
        process    = <Popen: returncode: 0 args: ['/testbed/.venv/bin/python3', '/tmp/pytest-of-r...>
        raw        = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_n...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
        raw_       = b"None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_...a8\xd1\x80\xd1\x82\xf0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j/lib/python3.12/site-packages/pydoc_test.py'\n"
        script_content = b'"""\nActivate virtualenv for current interpreter:\n\nimport runpy\nrunpy.run_path(this_file)\n\nThis can be used whe...)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\n\nsys.real_prefix = sys.prefix\nsys.prefix = base\n'
        self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0/script.py')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = [None, 'testbed', ['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_n...-packages', '/testbed/src'], '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_n...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0')

    def assert_output(self, out, raw, tmp_path):  # noqa: ARG002
        out = [literal_eval(i) for i in out]
        assert out[0] is None  # start with VIRTUAL_ENV None
>       assert out[1] is None  # likewise for VIRTUAL_ENV_PROMPT
E       AssertionError: assert 'testbed' is None

out        = [None, 'testbed', ['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_n...-packages', '/testbed/src'], '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python_n...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_no_prompt_0')

/testbed/tests/unit/activation/test_python_activator.py:65: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_bash.py::test_bash[no_prompt-False]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
hashing_enabled = False
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366d79c0>

    @pytest.mark.skipif(IS_WIN, reason="Github Actions ships with WSL bash")
    @pytest.mark.parametrize("hashing_enabled", [True, False])
    def test_bash(raise_on_non_source_class, hashing_enabled, activation_tester):
        class Bash(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    BashActivator,
                    session,
                    "bash",
                    "activate",
                    "sh",
                    "You must source this script: $ source ",
                )
                self.deactivate += " || exit 1"
                self._invoke_script.append("-h" if hashing_enabled else "+h")

            def activate_call(self, script):
                return super().activate_call(script) + " || exit 1"

            def print_prompt(self):
                return self.print_os_env_var("PS1")

>       activation_tester(Bash)

Bash       = <class 'test_bash.test_bash.<locals>.Bash'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366d79c0>
hashing_enabled = False
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_bash.py:31: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc364c54f0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36487b60>
        tester     = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_bash.test_bash.<locals>.Bash'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0')
        version    = 'GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation, Inc.\nLicense...is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36487b60>
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/activate')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['bash', '+h', '/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0/script.sh']
        line       = b'hash -r 2>/dev/null || true'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36487b60>
        out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
        process    = <Popen: returncode: 0 args: ['bash', '+h', '/tmp/pytest-of-root/pytest-0/tes...>
        raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        raw_       = b'/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ \xc3\xa8\xd1\x80\...0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        script_content = b'# This file must be used with "source bin/activate" *from bash*\n# you cannot run it directly\n\n\nif [ "${BASH_SOUR...nds. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2>/dev/null || true\n'
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0/script.sh')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0')

    def assert_output(self, out, raw, tmp_path):
        # pre-activation
        assert out[0], raw
        assert out[1] == "None", raw
>       assert out[2] == "None", raw
E       AssertionError: /testbed/.venv/bin/python3
E         None
E         testbed
E         /tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3
E         /tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j
E         e-$ èрт🚒♞中片-j
E         (e-$ èрт🚒♞中片-j) 
E         wrote pydoc_test.html
E         /testbed/.venv/bin/python3
E         None
E         None
E         
E       assert 'testbed' == 'None'
E         
E         - None
E         + testbed

out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_False_0')

/testbed/tests/unit/activation/conftest.py:137: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_bash.py::test_bash[no_prompt-True]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
hashing_enabled = True
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366d54e0>

    @pytest.mark.skipif(IS_WIN, reason="Github Actions ships with WSL bash")
    @pytest.mark.parametrize("hashing_enabled", [True, False])
    def test_bash(raise_on_non_source_class, hashing_enabled, activation_tester):
        class Bash(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    BashActivator,
                    session,
                    "bash",
                    "activate",
                    "sh",
                    "You must source this script: $ source ",
                )
                self.deactivate += " || exit 1"
                self._invoke_script.append("-h" if hashing_enabled else "+h")

            def activate_call(self, script):
                return super().activate_call(script) + " || exit 1"

            def print_prompt(self):
                return self.print_os_env_var("PS1")

>       activation_tester(Bash)

Bash       = <class 'test_bash.test_bash.<locals>.Bash'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc366d54e0>
hashing_enabled = True
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_bash.py:31: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc364c54f0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36485af0>
        tester     = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_bash.test_bash.<locals>.Bash'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0')
        version    = 'GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation, Inc.\nLicense...is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36485af0>
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/activate')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['bash', '-h', '/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0/script.sh']
        line       = b'hash -r 2>/dev/null || true'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc36485af0>
        out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
        process    = <Popen: returncode: 0 args: ['bash', '-h', '/tmp/pytest-of-root/pytest-0/tes...>
        raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        raw_       = b'/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ \xc3\xa8\xd1\x80\...0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        script_content = b'# This file must be used with "source bin/activate" *from bash*\n# you cannot run it directly\n\n\nif [ "${BASH_SOUR...nds. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2>/dev/null || true\n'
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0/script.sh')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0')

    def assert_output(self, out, raw, tmp_path):
        # pre-activation
        assert out[0], raw
        assert out[1] == "None", raw
>       assert out[2] == "None", raw
E       AssertionError: /testbed/.venv/bin/python3
E         None
E         testbed
E         /tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3
E         /tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j
E         e-$ èрт🚒♞中片-j
E         (e-$ èрт🚒♞中片-j) 
E         wrote pydoc_test.html
E         /testbed/.venv/bin/python3
E         None
E         None
E         
E       assert 'testbed' == 'None'
E         
E         - None
E         + testbed

out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env0/e-$ èрт🚒♞中片-j/bin/pyth...r-env0/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_no_prompt_True_0')

/testbed/tests/unit/activation/conftest.py:137: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_python_activator.py::test_python[with_prompt]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34b86e80>

    def test_python(raise_on_non_source_class, activation_tester):
        class Python(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    PythonActivator,
                    session,
                    sys.executable,
                    activate_script="activate_this.py",
                    extension="py",
                    non_source_fail_message="You must use import runpy; runpy.run_path(this_file)",
                )
                self.unix_line_ending = not IS_WIN

            def env(self, tmp_path):
                env = os.environ.copy()
                env["PYTHONIOENCODING"] = "utf-8"
                for key in ("VIRTUAL_ENV", "PYTHONPATH"):
                    env.pop(str(key), None)
                env["PATH"] = os.pathsep.join([str(tmp_path), str(tmp_path / "other")])
                return env

            @staticmethod
            def _get_test_lines(activate_script):
                raw = f"""
                import os
                import sys
                import platform
                import runpy

                def print_r(value):
                    print(repr(value))

                print_r(os.environ.get("VIRTUAL_ENV"))
                print_r(os.environ.get("VIRTUAL_ENV_PROMPT"))
                print_r(os.environ.get("PATH").split(os.pathsep))
                print_r(sys.path)

                file_at = {str(activate_script)!r}
                # CPython 2 requires non-ascii path open to be unicode
                runpy.run_path(file_at)
                print_r(os.environ.get("VIRTUAL_ENV"))
                print_r(os.environ.get("VIRTUAL_ENV_PROMPT"))
                print_r(os.environ.get("PATH").split(os.pathsep))
                print_r(sys.path)

                import pydoc_test
                print_r(pydoc_test.__file__)
                """
                return dedent(raw).splitlines()

            def assert_output(self, out, raw, tmp_path):  # noqa: ARG002
                out = [literal_eval(i) for i in out]
                assert out[0] is None  # start with VIRTUAL_ENV None
                assert out[1] is None  # likewise for VIRTUAL_ENV_PROMPT

                prev_path = out[2]
                prev_sys_path = out[3]
                assert out[4] == str(self._creator.dest)  # VIRTUAL_ENV now points to the virtual env folder

                assert out[5] == str(self._creator.env_name)  # VIRTUAL_ENV_PROMPT now has the env name

                new_path = out[6]  # PATH now starts with bin path of current
                assert ([str(self._creator.bin_dir), *prev_path]) == new_path

                # sys path contains the site package at its start
                new_sys_path = out[7]

                new_lib_paths = {str(i) for i in self._creator.libs}
                assert prev_sys_path == new_sys_path[len(new_lib_paths) :]
                assert new_lib_paths == set(new_sys_path[: len(new_lib_paths)])

                # manage to import from activate site package
                dest = self.norm_path(self._creator.purelib / "pydoc_test.py")
                found = self.norm_path(out[8])
                assert found.startswith(dest)

            def non_source_activate(self, activate_script):
                act = str(activate_script)
                return [*self._invoke_script, "-c", f"exec(open({act!r}).read())"]

>       activation_tester(Python)

Python     = <class 'test_python_activator.test_python.<locals>.Python'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34b86e80>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_python_activator.py:92: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc36883ad0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364cc500>
        tester     = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_python_activator.test_python.<locals>.Python'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0')
        version    = 'Python 3.12.5\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364cc500>
        self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/activate_this.py')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0/script.py']
        line       = b'sys.prefix = base'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364cc500>
        out        = ['None', "'testbed'", "['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_p...ages', '/testbed/src']", "'/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j'", "'e-$ èрт🚒♞中片-j'", ...]
        process    = <Popen: returncode: 0 args: ['/testbed/.venv/bin/python3', '/tmp/pytest-of-r...>
        raw        = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
        raw_       = b"None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_pytho...a8\xd1\x80\xd1\x82\xf0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j/lib/python3.12/site-packages/pydoc_test.py'\n"
        script_content = b'"""\nActivate virtualenv for current interpreter:\n\nimport runpy\nrunpy.run_path(this_file)\n\nThis can be used whe...)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\n\nsys.real_prefix = sys.prefix\nsys.prefix = base\n'
        self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0/script.py')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = [None, 'testbed', ['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python...-packages', '/testbed/src'], '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0')

    def assert_output(self, out, raw, tmp_path):  # noqa: ARG002
        out = [literal_eval(i) for i in out]
        assert out[0] is None  # start with VIRTUAL_ENV None
>       assert out[1] is None  # likewise for VIRTUAL_ENV_PROMPT
E       AssertionError: assert 'testbed' is None

out        = [None, 'testbed', ['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python...-packages', '/testbed/src'], '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = "None\n'testbed'\n['/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0', '/tmp/pytest-of-root/pytest-0/test_python...rc']\n'/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/pydoc_test.py'\n"
self       = Python(
version='Python 3.12.5\n',
creator=CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ ...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_python_with_prompt_0')

/testbed/tests/unit/activation/test_python_activator.py:65: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_bash.py::test_bash[with_prompt-False]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
hashing_enabled = False
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34bdc220>

    @pytest.mark.skipif(IS_WIN, reason="Github Actions ships with WSL bash")
    @pytest.mark.parametrize("hashing_enabled", [True, False])
    def test_bash(raise_on_non_source_class, hashing_enabled, activation_tester):
        class Bash(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    BashActivator,
                    session,
                    "bash",
                    "activate",
                    "sh",
                    "You must source this script: $ source ",
                )
                self.deactivate += " || exit 1"
                self._invoke_script.append("-h" if hashing_enabled else "+h")

            def activate_call(self, script):
                return super().activate_call(script) + " || exit 1"

            def print_prompt(self):
                return self.print_os_env_var("PS1")

>       activation_tester(Bash)

Bash       = <class 'test_bash.test_bash.<locals>.Bash'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34bdc220>
hashing_enabled = False
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_bash.py:31: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc36883ad0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d1760>
        tester     = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_bash.test_bash.<locals>.Bash'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0')
        version    = 'GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation, Inc.\nLicense...is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d1760>
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/activate')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['bash', '+h', '/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0/script.sh']
        line       = b'hash -r 2>/dev/null || true'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d1760>
        out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
        process    = <Popen: returncode: 0 args: ['bash', '+h', '/tmp/pytest-of-root/pytest-0/tes...>
        raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        raw_       = b'/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ \xc3\xa8\xd1\x80\...0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        script_content = b'# This file must be used with "source bin/activate" *from bash*\n# you cannot run it directly\n\n\nif [ "${BASH_SOUR...nds. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2>/dev/null || true\n'
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0/script.sh')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0')

    def assert_output(self, out, raw, tmp_path):
        # pre-activation
        assert out[0], raw
        assert out[1] == "None", raw
>       assert out[2] == "None", raw
E       AssertionError: /testbed/.venv/bin/python3
E         None
E         testbed
E         /tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3
E         /tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j
E         e-$ èрт🚒♞中片-j
E         (e-$ èрт🚒♞中片-j) 
E         wrote pydoc_test.html
E         /testbed/.venv/bin/python3
E         None
E         None
E         
E       assert 'testbed' == 'None'
E         
E         - None
E         + testbed

out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_False_0')

/testbed/tests/unit/activation/conftest.py:137: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/activation/test_bash.py::test_bash[with_prompt-True]</pre></summary><pre>
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>
hashing_enabled = True
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34bdcae0>

    @pytest.mark.skipif(IS_WIN, reason="Github Actions ships with WSL bash")
    @pytest.mark.parametrize("hashing_enabled", [True, False])
    def test_bash(raise_on_non_source_class, hashing_enabled, activation_tester):
        class Bash(raise_on_non_source_class):
            def __init__(self, session) -> None:
                super().__init__(
                    BashActivator,
                    session,
                    "bash",
                    "activate",
                    "sh",
                    "You must source this script: $ source ",
                )
                self.deactivate += " || exit 1"
                self._invoke_script.append("-h" if hashing_enabled else "+h")

            def activate_call(self, script):
                return super().activate_call(script) + " || exit 1"

            def print_prompt(self):
                return self.print_os_env_var("PS1")

>       activation_tester(Bash)

Bash       = <class 'test_bash.test_bash.<locals>.Bash'>
activation_tester = <function activation_tester.<locals>._tester at 0x7ecc34bdcae0>
hashing_enabled = True
raise_on_non_source_class = <class 'conftest.RaiseOnNonSourceCall'>

/testbed/tests/unit/activation/test_bash.py:31: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/testbed/tests/unit/activation/conftest.py:253: in _tester
    return tester(monkeypatch, tmp_path)
        activation_python = <virtualenv.run.session.Session object at 0x7ecc36883ad0>
        is_inside_ci = False
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d3d70>
        tester     = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tester_class = <class 'test_bash.test_bash.<locals>.Bash'>
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0')
        version    = 'GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation, Inc.\nLicense...is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n'
/testbed/tests/unit/activation/conftest.py:209: in __call__
    env, activate_script = super().__call__(monkeypatch, tmp_path)
        __class__  = <class 'conftest.RaiseOnNonSourceCall'>
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d3d70>
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0')
/testbed/tests/unit/activation/conftest.py:89: in __call__
    self.assert_output(out, raw, tmp_path)
        _          = None
        activate_script = PosixPath('/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/activate')
        env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
        invoke     = ['bash', '-h', '/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0/script.sh']
        line       = b'hash -r 2>/dev/null || true'
        monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7ecc364d3d70>
        out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
        process    = <Popen: returncode: 0 args: ['bash', '-h', '/tmp/pytest-of-root/pytest-0/tes...>
        raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        raw_       = b'/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ \xc3\xa8\xd1\x80\...0\x9f\x9a\x92\xe2\x99\x9e\xe4\xb8\xad\xe7\x89\x87-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
        script_content = b'# This file must be used with "source bin/activate" *from bash*\n# you cannot run it directly\n\n\nif [ "${BASH_SOUR...nds. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2>/dev/null || true\n'
        self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
        test_script = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0/script.sh')
        tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0')
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
out = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0')

    def assert_output(self, out, raw, tmp_path):
        # pre-activation
        assert out[0], raw
        assert out[1] == "None", raw
>       assert out[2] == "None", raw
E       AssertionError: /testbed/.venv/bin/python3
E         None
E         testbed
E         /tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3
E         /tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j
E         e-$ èрт🚒♞中片-j
E         (e-$ èрт🚒♞中片-j) 
E         wrote pydoc_test.html
E         /testbed/.venv/bin/python3
E         None
E         None
E         
E       assert 'testbed' == 'None'
E         
E         - None
E         + testbed

out        = ['/testbed/.venv/bin/python3', 'None', 'testbed', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/python3', '/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j', 'e-$ èрт🚒♞中片-j', ...]
raw        = '/testbed/.venv/bin/python3\nNone\ntestbed\n/tmp/pytest-of-root/pytest-0/activation-tester-env1/e-$ èрт🚒♞中片-j/bin/pyth...r-env1/e-$ èрт🚒♞中片-j\ne-$ èрт🚒♞中片-j\n(e-$ èрт🚒♞中片-j) \nwrote pydoc_test.html\n/testbed/.venv/bin/python3\nNone\nNone\n'
self       = Bash(
version='GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2020 Free Software Foundation,...n/python3, platform=linux, version='3.12.5 (main, Aug 14 2024, 05:08:31) [Clang 18.1.8 ]', encoding_fs_io=utf-8-utf-8))
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_with_prompt_True_0')

/testbed/tests/unit/activation/conftest.py:137: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[venv-venv-copies-isolated]</pre></summary><pre>
python = '/testbed/.venv/bin/python3'
creator = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False, describe=CPython3Posix)
isolated = 'isolated'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc369c2ac0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc369c2ac0>
creator    = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False, describe=CPython3Posix)
creator_key = 'venv'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j')
isolated   = 'isolated'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/testbed/.venv/bin/python3'
result     = <virtualenv.run.session.Session object at 0x7ecc27fed280>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_0/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[venv-cpython3-posix-copies-isolated]</pre></summary><pre>
python = '/testbed/.venv/bin/python3'
creator = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False)
isolated = 'isolated'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc27981da0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc27981da0>
creator    = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False)
creator_key = 'cpython3-posix'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j')
isolated   = 'isolated'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/testbed/.venv/bin/python3'
result     = <virtualenv.run.session.Session object at 0x7ecc26ab7560>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth0/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[venv-venv-copies-global]</pre></summary><pre>
python = '/testbed/.venv/bin/python3'
creator = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True, describe=CPython3Posix)
isolated = 'global'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a4720>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a4720>
creator    = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True, describe=CPython3Posix)
creator_key = 'venv'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j')
isolated   = 'global'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/testbed/.venv/bin/python3'
result     = <virtualenv.run.session.Session object at 0x7ecc26ab6600>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_venv_2/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[venv-cpython3-posix-copies-global]</pre></summary><pre>
python = '/testbed/.venv/bin/python3'
creator = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True)
isolated = 'global'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a5da0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/testbed/.venv/bin/python3', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a5da0>
creator    = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True)
creator_key = 'cpython3-posix'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j')
isolated   = 'global'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/testbed/.venv/bin/python3'
result     = <virtualenv.run.session.Session object at 0x7ecc26aee9f0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_venv_cpyth3/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[root-cpython3-posix-copies-global]</pre></summary><pre>
python = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
creator = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True)
isolated = 'global'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a7740>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a7740>
creator    = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True)
creator_key = 'cpython3-posix'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j')
isolated   = 'global'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
result     = <virtualenv.run.session.Session object at 0x7ecc26701220>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth0/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[root-venv-copies-isolated]</pre></summary><pre>
python = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
creator = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False, describe=CPython3Posix)
isolated = 'isolated'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a6ca0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a6ca0>
creator    = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False, describe=CPython3Posix)
creator_key = 'venv'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j')
isolated   = 'isolated'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
result     = <virtualenv.run.session.Session object at 0x7ecc26629640>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_1/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[root-venv-copies-global]</pre></summary><pre>
python = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
creator = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True, describe=CPython3Posix)
isolated = 'global'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a7880>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a7880>
creator    = Venv(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=True, describe=CPython3Posix)
creator_key = 'venv'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j')
isolated   = 'global'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
result     = <virtualenv.run.session.Session object at 0x7ecc26ab7050>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_venv_3/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_create_no_seed[root-cpython3-posix-copies-isolated]</pre></summary><pre>
python = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
creator = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False)
isolated = 'isolated'
system = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a4ae0>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j')

    @pytest.mark.parametrize(
        ("creator", "isolated"),
        [pytest.param(*i, id=f"{'-'.join(i[0])}-{i[1]}") for i in product(CREATE_METHODS, ["isolated", "global"])],
    )
    def test_create_no_seed(  # noqa: C901, PLR0912, PLR0913, PLR0915
        python,
        creator,
        isolated,
        system,
        coverage_env,
        special_name_dir,
    ):
        dest = special_name_dir
        creator_key, method = creator
        cmd = [
            "-v",
            "-v",
            "-p",
            str(python),
            str(dest),
            "--without-pip",
            "--activators",
            "",
            "--creator",
            creator_key,
            f"--{method}",
        ]
        if isolated == "global":
            cmd.append("--system-site-packages")
        result = cli_run(cmd)
        creator = result.creator
        coverage_env()
        if IS_PYPY:
            # pypy cleans up file descriptors periodically so our (many) subprocess calls impact file descriptor limits
            # force a close of these on system where the limit is low-ish (e.g. MacOS 256)
            gc.collect()
        purelib = creator.purelib
        patch_files = {purelib / f"{'_virtualenv'}.{i}" for i in ("py", "pyc", "pth")}
        patch_files.add(purelib / "__pycache__")
        content = set(creator.purelib.iterdir()) - patch_files
        assert not content, "\n".join(str(i) for i in content)
        assert creator.env_name == str(dest.name)
        debug = creator.debug
>       assert "exception" not in debug, f"{debug.get('exception')}\n{debug.get('out')}\n{debug.get('err')}"
E       AssertionError: Exception('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\n')
E         
E         /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading shared libraries: /tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/../lib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory
E         
E       assert 'exception' not in {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}

cmd        = ['-v', '-v', '-p', '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12', '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j', '--without-pip', ...]
content    = set()
coverage_env = <function coverage_env.<locals>.finish at 0x7ecc268a4ae0>
creator    = CPython3Posix(dest=/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j, clear=False, no_vcs_ignore=False, global=False)
creator_key = 'cpython3-posix'
debug      = {'err': '/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/bin/python: error while loading sh...ib/libpython3.12.so.1.0: cannot open shared object file: No such file or directory\\n')", 'out': '', 'returncode': 127}
dest       = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j')
isolated   = 'isolated'
method     = 'copies'
patch_files = {PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/__...p/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages/_virtualenv.pyc')}
purelib    = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j/lib/python3.12/site-packages')
python     = '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/bin/python3.12'
result     = <virtualenv.run.session.Session object at 0x7ecc26628440>
special_name_dir = PosixPath('/tmp/pytest-of-root/pytest-0/test_create_no_seed_root_cpyth3/e-$ èрт🚒♞中片-j')
system     = {'datetime': "<module 'datetime' from '/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/dat...12.5-linux-x86_64-gnu/lib/python3.12/config-3.12-x86_64-linux-gnu/Makefile', 'math': "<module 'math' (built-in)>", ...}

tests/unit/create/test_creator.py:149: AssertionError
</pre>
</details>

<details><summary> <pre>tests/unit/create/test_creator.py::test_zip_importer_can_import_setuptools</pre></summary><pre>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0')

    @pytest.mark.skipif(is_macos_brew(CURRENT), reason="no copy on brew")
    def test_zip_importer_can_import_setuptools(tmp_path):
        """We're patching the loaders so might fail on r/o loaders, such as zipimporter on CPython<3.8"""
        result = cli_run(
            [str(tmp_path / "venv"), "--activators", "", "--no-pip", "--no-wheel", "--copies", "--setuptools", "bundle"],
        )
        zip_path = tmp_path / "site-packages.zip"
        with zipfile.ZipFile(str(zip_path), "w", zipfile.ZIP_DEFLATED) as zip_handler:
            lib = str(result.creator.purelib)
            for root, _, files in os.walk(lib):
                base = root[len(lib) :].lstrip(os.pathsep)
                for file in files:
                    if not file.startswith("_virtualenv"):
                        zip_handler.write(filename=os.path.join(root, file), arcname=os.path.join(base, file))
        for folder in result.creator.purelib.iterdir():
            if not folder.name.startswith("_virtualenv"):
                if folder.is_dir():
                    shutil.rmtree(str(folder), ignore_errors=True)
                else:
                    folder.unlink()
        env = os.environ.copy()
        env["PYTHONPATH"] = str(zip_path)
>       subprocess.check_call([str(result.creator.exe), "-c", "from setuptools.dist import Distribution"], env=env)

_          = []
base       = '/setuptools/_vendor/importlib_resources'
env        = {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}
file       = 'py.typed'
files      = ['_adapters.py', 'simple.py', '_legacy.py', 'abc.py', '_common.py', '_itertools.py', ...]
folder     = PosixPath('/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/lib/python3.12/site-packages/_virtualenv.py')
lib        = '/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/lib/python3.12/site-packages'
result     = <virtualenv.run.session.Session object at 0x7ecc265d1850>
root       = '/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/lib/python3.12/site-packages/setuptools/_vendor/importlib_resources'
tmp_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0')
zip_handler = <zipfile.ZipFile [closed]>
zip_path   = PosixPath('/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/site-packages.zip')

tests/unit/create/test_creator.py:461: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

popenargs = (['/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/bin/python', '-c', 'from setuptools.dist import Distribution'],)
kwargs = {'env': {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}}
retcode = 127
cmd = ['/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/bin/python', '-c', 'from setuptools.dist import Distribution']

    def check_call(*popenargs, **kwargs):
        """Run command with arguments.  Wait for command to complete.  If
        the exit code was zero then return, otherwise raise
        CalledProcessError.  The CalledProcessError object will have the
        return code in the returncode attribute.

        The arguments are the same as for the call function.  Example:

        check_call(["ls", "-l"])
        """
        retcode = call(*popenargs, **kwargs)
        if retcode:
            cmd = kwargs.get("args")
            if cmd is None:
                cmd = popenargs[0]
>           raise CalledProcessError(retcode, cmd)
E           subprocess.CalledProcessError: Command '['/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/bin/python', '-c', 'from setuptools.dist import Distribution']' returned non-zero exit status 127.

cmd        = ['/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/bin/python', '-c', 'from setuptools.dist import Distribution']
kwargs     = {'env': {'HOME': '/root', 'HOSTNAME': 'b92ec9001c17', 'LC_CTYPE': 'C.UTF-8', 'OLDPWD': '/testbed', ...}}
popenargs  = (['/tmp/pytest-of-root/pytest-0/test_zip_importer_can_import_s0/venv/bin/python', '-c', 'from setuptools.dist import Distribution'],)
retcode    = 127

/root/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu/lib/python3.12/subprocess.py:413: CalledProcessError
</pre>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
        <script src="../javascripts/button_select.js"></script>
      
    
  </body>
</html>